{"version":3,"file":"index.js","sources":["../../src/utils/helpers/index.ts"],"sourcesContent":["/**\r\n * 通用工具函数\r\n * 提供常用的辅助函数\r\n */\r\n\r\n/**\r\n * 判断对象是否为空\r\n * @param obj - 要检查的对象\r\n * @returns 如果对象为空返回true，否则返回false\r\n */\r\nexport const isEmpty = (obj: Record<string, any>): boolean => \r\n  Object.keys(obj).length === 0 && obj.constructor === Object;\r\n\r\n/**\r\n * 设置cookie\r\n * @param name - cookie名称\r\n * @param value - cookie值\r\n * @param days - 过期天数，默认7天\r\n * @param path - cookie路径，默认'/'\r\n */\r\nexport const setCookie = (name: string, value: string, days: number = 7, path: string = '/'): void => {\r\n  const expires = new Date(Date.now() + days * 864e5).toUTCString();\r\n  document.cookie = `${name}=${encodeURIComponent(value)}; expires=${expires}; path=${path}`;\r\n};\r\n\r\n/**\r\n * 获取cookie值\r\n * @param name - cookie名称\r\n * @returns cookie值，如果不存在则返回空字符串\r\n */\r\nexport const getCookie = (name: string): string =>\r\n  document.cookie.split('; ').reduce((r, v) => {\r\n    const parts = v.split('=');\r\n    return parts[0] === name ? decodeURIComponent(parts[1]) : r;\r\n  }, '');\r\n\r\n/**\r\n * 删除cookie\r\n * @param name - cookie名称\r\n * @param path - cookie路径\r\n */\r\nexport const deleteCookie = (name: string, path: string = '/'): void => {\r\n  setCookie(name, '', -1, path);\r\n};\r\n\r\n/**\r\n * 获取所有cookie作为对象\r\n * @returns 包含所有cookie的对象\r\n */\r\nexport const getCookieObj = (): Record<string, string> => {\r\n  const cookieArr = document.cookie.split('; ').map(item => item.split('='));\r\n  const obj: Record<string, string> = {};\r\n  for (const [prop, value] of cookieArr) obj[prop] = value;\r\n  return obj;\r\n};\r\n\r\n/**\r\n * 将字符串分割成指定大小的块\r\n * @param str - 要分割的字符串\r\n * @param size - 每个块的大小\r\n * @returns 分割后的字符串数组\r\n */\r\nexport const chunkString = (str: string, size: number): string[] => {\r\n  const numChunks = Math.ceil(str.length / size);\r\n  const chunks = new Array(numChunks);\r\n\r\n  for (let i = 0, o = 0; i < numChunks; i += 1, o += size) {\r\n    chunks[i] = str.substr(o, size);\r\n  }\r\n\r\n  return chunks;\r\n};\r\n\r\n/**\r\n * 节流函数\r\n * 限制函数在一定时间内只能执行一次\r\n * @param callee - 要节流的函数\r\n * @param timeout - 节流时间间隔（毫秒）\r\n * @returns 节流后的函数\r\n */\r\nexport const throttle = <T extends (...args: any[]) => any>(callee: T, timeout: number): ((...args: Parameters<T>) => void) => {\r\n  let timer: number | null = null;\r\n  \r\n  return function perform(...args: Parameters<T>): void {\r\n    if (timer) return;\r\n    \r\n    timer = window.setTimeout(() => {\r\n      callee(...args);\r\n      timer = null;\r\n    }, timeout);\r\n  };\r\n};\r\n\r\n/**\r\n * 防抖函数\r\n * 延迟函数执行，如果在延迟时间内再次调用则重新计时\r\n * @param callee - 要防抖的函数\r\n * @param timeout - 防抖时间间隔（毫秒）\r\n * @returns 防抖后的函数\r\n */\r\nexport const debounce = <T extends (...args: any[]) => any>(callee: T, timeout: number): ((...args: Parameters<T>) => void) => {\r\n  let timer: number | null = null;\r\n  \r\n  return function perform(...args: Parameters<T>): void {\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n    }\r\n    \r\n    timer = window.setTimeout(() => {\r\n      callee(...args);\r\n      timer = null;\r\n    }, timeout);\r\n  };\r\n};\r\n\r\n/**\r\n * 截断数字到指定小数位\r\n * @param amount - 要截断的数字\r\n * @param digit - 小数位数，默认为2\r\n * @returns 截断后的数字\r\n */\r\nexport const truncateToDecimals = (amount: number, digit: number = 2): number => {\r\n  const re = new RegExp(`(\\\\d+\\\\.\\\\d{${digit}})(\\\\d)`);\r\n  const m = amount.toString().match(re);\r\n  return m ? parseFloat(m[1]) : amount;\r\n};\r\n\r\n/**\r\n * 格式化金额显示\r\n * @param amount - 金额数值\r\n * @param options - 格式化选项\r\n * @returns 格式化后的金额字符串\r\n */\r\nexport const formatAmount = (\r\n  amount: number,\r\n  options: {\r\n    locale?: string;\r\n    currency?: string;\r\n    minimumFractionDigits?: number;\r\n    maximumFractionDigits?: number;\r\n  } = {}\r\n): string => {\r\n  const {\r\n    locale = 'en-US',\r\n    currency = 'USD',\r\n    minimumFractionDigits = 2,\r\n    maximumFractionDigits = 2\r\n  } = options;\r\n  \r\n  return new Intl.NumberFormat(locale, {\r\n    style: 'currency',\r\n    currency,\r\n    minimumFractionDigits,\r\n    maximumFractionDigits\r\n  }).format(amount);\r\n}; "],"names":["setCookie","name","value","days","path","expires","Date","now","toUTCString","document","cookie","concat","encodeURIComponent","str","size","numChunks","Math","ceil","length","chunks","Array","i","o","substr","callee","timeout","timer","args","_i","arguments","clearTimeout","window","setTimeout","apply","amount","options","_a","locale","_b","currency","_c","minimumFractionDigits","_d","maximumFractionDigits","Intl","NumberFormat","style","format","split","reduce","r","v","parts","decodeURIComponent","obj","cookieArr_1","map","item","prop","Object","keys","constructor","digit","re","RegExp","m","toString","match","parseFloat"],"mappings":"aAUO,IAUMA,EAAY,SAACC,EAAcC,EAAeC,EAAkBC,QAAlB,IAAAD,IAAAA,EAAgB,QAAE,IAAAC,IAAAA,EAAkB,KACzF,IAAMC,EAAU,IAAIC,KAAKA,KAAKC,MAAe,MAAPJ,GAAcK,cACpDC,SAASC,OAAS,GAAAC,OAAGV,EAAQ,KAAAU,OAAAC,mBAAmBV,GAAmB,cAAAS,OAAAN,EAAiB,WAAAM,OAAAP,EACtF,sBAuC2B,SAACS,EAAaC,GAIvC,IAHA,IAAMC,EAAYC,KAAKC,KAAKJ,EAAIK,OAASJ,GACnCK,EAAS,IAAIC,MAAML,GAEhBM,EAAI,EAAGC,EAAI,EAAGD,EAAIN,EAAWM,GAAK,EAAGC,GAAKR,EACjDK,EAAOE,GAAKR,EAAIU,OAAOD,EAAGR,GAG5B,OAAOK,CACT,mBA6BwB,SAAoCK,EAAWC,GACrE,IAAIC,EAAuB,KAE3B,OAAO,eAAiB,IAAsBC,EAAA,GAAAC,EAAA,EAAtBA,EAAsBC,UAAAX,OAAtBU,IAAAD,EAAsBC,GAAAC,UAAAD,GACxCF,GACFI,aAAaJ,GAGfA,EAAQK,OAAOC,WAAW,WACxBR,EAAMS,WAAA,EAAIN,GACVD,EAAQ,IACT,EAAED,EACL,CACF,uBAxE4B,SAACxB,EAAcG,QAAA,IAAAA,IAAAA,EAAkB,KAC3DJ,EAAUC,EAAM,IAAK,EAAGG,EAC1B,uBA0F4B,SAC1B8B,EACAC,QAAA,IAAAA,IAAAA,EAKM,CAAA,GAGJ,IAAAC,EAIED,EAJcE,OAAhBA,OAAS,IAAAD,EAAA,QAAOA,EAChBE,EAGEH,EAAOI,SAHTA,aAAW,MAAKD,EAChBE,EAEEL,EAFuBM,sBAAzBA,OAAqB,IAAAD,EAAG,EAACA,EACzBE,EACEP,wBADFQ,OAAwB,IAAAD,EAAA,IAG1B,OAAO,IAAIE,KAAKC,aAAaR,EAAQ,CACnCS,MAAO,WACPP,SAAQA,EACRE,sBAAqBA,EACrBE,sBAAqBA,IACpBI,OAAOb,EACZ,oBA7HyB,SAACjC,GACxB,OAAAQ,SAASC,OAAOsC,MAAM,MAAMC,OAAO,SAACC,EAAGC,GACrC,IAAMC,EAAQD,EAAEH,MAAM,KACtB,OAAOI,EAAM,KAAOnD,EAAOoD,mBAAmBD,EAAM,IAAMF,CAC3D,EAAE,GAHH,uBAkB0B,WAG1B,IAFA,IACMI,EAA8B,CAAA,MACRC,EAFV9C,SAASC,OAAOsC,MAAM,MAAMQ,IAAI,SAAAC,GAAQ,OAAAA,EAAKT,MAAM,IAAI,GAE7CpB,EAAA2B,EAAArC,OAAAU,IAAS,CAA1B,IAAAQ,OAACsB,EAAItB,EAAA,GAAElC,EAAKkC,EAAA,GAAgBkB,EAAII,GAAQxD,CAAM,CACzD,OAAOoD,CACT,kBA5CuB,SAACA,GACtB,OAA4B,IAA5BK,OAAOC,KAAKN,GAAKpC,QAAgBoC,EAAIO,cAAgBF,MAArD,uCAqEsB,SAAoCnC,EAAWC,GACrE,IAAIC,EAAuB,KAE3B,OAAO,eAAiB,IAAsBC,EAAA,GAAAC,EAAA,EAAtBA,EAAsBC,UAAAX,OAAtBU,IAAAD,EAAsBC,GAAAC,UAAAD,GACxCF,IAEJA,EAAQK,OAAOC,WAAW,WACxBR,EAAMS,WAAA,EAAIN,GACVD,EAAQ,IACT,EAAED,GACL,CACF,6BA8BkC,SAACS,EAAgB4B,QAAA,IAAAA,IAAAA,EAAiB,GAClE,IAAMC,EAAK,IAAIC,OAAO,eAAerD,OAAAmD,EAAc,YAC7CG,EAAI/B,EAAOgC,WAAWC,MAAMJ,GAClC,OAAOE,EAAIG,WAAWH,EAAE,IAAM/B,CAChC"}